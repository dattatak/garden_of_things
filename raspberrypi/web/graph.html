<html>
<head>
</head>
<script src="https://cdn.zingchart.com/zingchart.min.js"></script>
<body>
<div id="myChart"></div>
</body>

<script>
var myConfig = {
  //chart styling
  type: 'line',
  globals: {
    fontFamily: 'Roboto',
  },
  backgroundColor: '#fff',
  title: {
    backgroundColor: '#1565C0',
    text: 'Real-Time Line Chart',
    color: '#fff',
    height: '30x',
  },
  plotarea: {
    marginTop: '80px'
  },
  crosshairX: {
    lineWidth: 4,
    lineStyle: 'dashed',
    lineColor: '#424242',
    marker : {
	    visible : true,
      size : 9
	  },
    plotLabel: {
      backgroundColor: '#fff',
      borderColor: '#e3e3e3',
      borderRadius:5,
      padding:15,
      fontSize: 15,
      shadow : true,
	    shadowAlpha : 0.2,
	    shadowBlur : 5,
	    shadowDistance : 4,
    },
    scaleLabel: {
      backgroundColor: '#424242',
      padding:5
    }
  },
  scaleY: {
    guide: {
      visible: false
    },
    values: '0:1000:100'
  },
  scaleX:{
    maxItems:360
  },
  tooltip: {
    visible: false
  },
  //real-time feed
  refresh: {
    type: 'feed',
    transport: 'js',
    url: 'feed()',
    interval: 1000,
    maxTicks:360,
    adjustScale:true
  },
  plot: {
    shadow: 1,
    shadowColor: '#eee',
    shadowDistance: '10px',
    lineWidth:5,
    hoverState: {visible: false},
    marker:{ visible: false},
    aspect:'spline'
  },
  series: [{
    values: [],
    lineColor: '#2196F3',
    text: 'Blue Line'
  },{
    values: [],
    lineColor: '#ff9800',
    text: 'Orange Line'
  }]
};
 
zingchart.render({
  id: 'myChart',
  data: myConfig,
  height: '100%',
  width: '100%'
});

//real-time feed random math function
window.feed = function(callback) {
  var tick = {};
  var t = 360;
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function(){
      if (this.readyState == 4 && this.status == 200){
          var responseArray = []
          responseArray = JSON.parse(this.responseText);
          for(var i = t; i > 0; i--){
            tick.plot0 = responseArray[i];
            callback(JSON.stringify(tick));
          }
      }
  };
  xhttp.open("GET", "latestValues.php?pin=5&t="+t, true);
  xhttp.send();
};


 
function clearGraph() {
  zingchart.exec('myChart', 'clearfeed')
}
 
function startGraph() {
  zingchart.exec('myChart', 'startfeed');
}
 
function stopGraph() {
  zingchart.exec('myChart', 'stopfeed');
}

</script>

</html>